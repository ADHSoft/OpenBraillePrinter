/*******************************************************************************************************************************//**
 *
 * @file		DR_nombre.h
 * @brief		Breve descripción del objetivo del Módulo
 * @date		1 de abr. de 2016
 * @author		Ing. Marcelo Trujillo
 *
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** MODULO
 **********************************************************************************************************************************/
#ifndef DR_UART_H_
#define DR_UART_H_

/***********************************************************************************************************************************
 *** INCLUDES GLOBALES
 **********************************************************************************************************************************/
#include "./../DR_tipos.h"
#include "./../DR_gpio.h"
#include "./../DR_PLL.h"
#include "./../DR_pinsel.h"

/***********************************************************************************************************************************
 *** DEFINES GLOBALES
 **********************************************************************************************************************************/
#define IIR_RDA			2
#define IIR_THRE		1

#define UART1	((__RW uint32_t *) 0x40010000)
#define UART0	((__RW uint32_t *) 0x4000C000)

#define U1RBR	UART1[0]
#define U1THR	UART1[0]
#define U1DLL	UART1[0]
#define U1DLM	UART1[1]
#define U1IER	UART1[1]
#define U1IIR	UART1[2]
#define U1LCR	UART1[3]
#define U1LSR	UART1[5]

#define U0RBR	UART0[0]
#define U0THR	UART0[0]
#define U0DLL	UART0[0]
#define U0DLM	UART0[1]
#define U0IER	UART0[1]
#define U0IIR	UART0[2]
#define U0FCR	UART0[2]
#define U0LCR	UART0[3]
#define U0LSR	UART0[5]


#define REGISTRO_DE_RECEPCION		U0RBR
#define REGISTRO_DE_TRANSMISION		U0THR

#define TOPE_BUFFER_TX 	100
#define TOPE_BUFFER_RX 	700

/***********************************************************************************************************************************
 *** MACROS GLOBALES
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TIPO DE DATOS GLOBALES
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES
 **********************************************************************************************************************************/

extern __RW uint8_t IndiceTxStart ;
extern __RW uint8_t CantidadTx ;

extern __RW uint8_t IndiceRxStart ;
extern __RW uint8_t CantidadRx ;

extern __RW uint8_t BufferTx[ TOPE_BUFFER_TX ];
extern __RW uint8_t BufferRx[ TOPE_BUFFER_RX ];

/***********************************************************************************************************************************
 *** PROTOTIPOS DE FUNCIONES GLOBALES
 **********************************************************************************************************************************/
void UART0_PushRx( uint8_t );
int16_t UART0_PopTx ( void );
void InitUART0( void );
void UART0_Iniciar_Envio( );

#endif /* DR_UART_H_ */
